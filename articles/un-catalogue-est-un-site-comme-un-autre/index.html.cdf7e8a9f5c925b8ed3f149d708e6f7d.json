{"head":{"title":"Un catalogue (papier) est un site (web) comme un autre","date":"2016-01-15T00:00:00.000Z","collection":"articles","layout":"Post","draft":false,"js":["hero-video-stop"],"youTubeAudio":"ZQpmc6hiIBQ","siteDescription":"Comment importer des bases de données dans inDesign","excerpt":{"text":"Les publications de bases de données ne sont pas l'exclusivité du web. Les catalogues de vrai papier l'utilisent aussi.","photo":"img/DSC_0329.jpg","photoAlt":"brochures composées par importation de données"},"description":"« Write once, display everywhere. » Intégrer une base de données dans un flux de publication, comme on le pratique pour le web, n’est pas…"},"body":"<p><em><em>« Write once, display everywhere. »</em></em> Intégrer une base de données dans un flux de publication, comme on le pratique pour le web, n’est pas évident à organiser quand il s'agit d'un catalogue papier<a href=\"#note01\">1</a>.</p>\n<p>Il existe aujourd'hui de nombreux services de web-to-print<a href=\"#note02\">2-4</a>. En fonction de l’organisation de l’entreprise, de l’ampleur du projet, internaliser un studio maquette le temps de la production est un aussi choix à considérer. Il facilite l'accès aux ressources documentaires internes ainsi que le travail collaboratif.</p>\n<p>Il s'agit alors d'élaborer des passerelles pour relier la base de données au logiciel de PAO.</p>\n<div id=\"post-hero-video-wrapper\" class=\"post-hero-video-wrapper\"> <video id=\"post-hero-video\" preload=\"auto\" autoplay=\"true\" loop poster=\"../../assets/img/pages-brochures.jpg\" width=\"100%\">  <img width=\"100%\" src=\"../../assets/img/pages-brochures.jpg\"> <source src=\"../../assets/img/pages-brochuresNB4.webm\"  type=\"video/webm\">  <source src=\"../../assets/img/pages-brochuresNB3.mp4\"  type=\"video/mp4\"> </video> <div class=\"gradient-filter\"></div>\n</div>\n<!--intro-->\n<h2 id=\"organiser-le-studio-interne\">Organiser le studio interne</h2>\n<p>L'équipe s'organise autour de deux fonctions :</p>\n<ul>\n<li>Un coordinateur est chargé de s'assurer de la disponibilité des données et gère le planning de production.</li>\n<li>Le responsable du studio gère l'équipe de maquettistes, veille au respect de la charte graphique, et adapte au besoin les maquettes produites.</li>\n</ul>\n<h2 id=\"concevoir-le-design-de-la-brochure\">Concevoir le design de la brochure</h2>\n<p>Passer du web au papier pose la contrainte de l’espace limité de la feuille de papier. Pour garder un confort de lecture, il va falloir filtrer les informations essentielles pour repérer le produit, le comprendre et le comparer.  </p>\n<p>La création graphique est testée avec des contenus réels, choisis selon les contraintes qu’ils représentent : notice longue, moyenne ou courte, nombreuses images, image unique ou absente…  Les résultats permettent de définir quel sera le résultat optimal. On en déduit les règles de compositions, les directives de rédaction, le calibrage des notices, ainsi que les éléments descriptifs finalement retenus.  </p>\n<p>Le principe de maquette validé, il faut  préparer le modèle d’importation pour la brochure, et le cas échéant, mettre à jour la base de données pour refléter les décisions de publication.</p>\n<p><img src=\"../../assets/img/conception-brochure.jpg\" alt=\"conception de brochure\" title=\"recherche de maquette, essais, croquis\"></p>\n<h2 id=\"créer-un-modèle-dimportation\">Créer un modèle d’importation</h2>\n<p>Le gabarit de maquette est adapté pour intégrer les balises XML. Les balises sont ordonnées et regroupées selon l’ordre de lecture. À chaque balise est associée une feuille de style.</p>\n<p>Chaque balise est ensuite appliquée dans un bloc texte ou graphique dans la maquette. Plusieurs balises peuvent se suivre à l'intérieur d'un même bloc.</p>\n<p>La plupart du temps, plusieurs produits seront présents sur une même page ; s'ils sont présentés de la même façon, ils peuvent etre importés en une seule fois, inDesign se charge de recopier le modèle à chaque fois.</p>\n<p>Dans d'autres cas, il faut importer les produits un par un, et leur attribuer un gabarit propre. Dans ce cas, ces gabarits sont enregistrés dans une bibliothèque, et seront disponibles à tout moment. Des variantes peuvent être imaginées selon que l'on pose le gabarit sur une page paire ou impaire…</p>\n<h2 id=\"préparer-la-base-de-données\">Préparer la base de données</h2>\n<p>La validation de la maquette entraîne parfois des adaptations de la base de données. C’est notamment le cas si le calibrage des notices impose une réécriture.</p>\n<p>D’autres adaptations, comme le résultat d'un calcul, la représentation d'une valeur sous forme de pictogramme, sont réalisés dynamiquement au moment de l’importation des données.</p>\n<p>Les données sont extraites sous forme de balisage XML. Les fonctions sont disponibles dans la plupart des frameworks ou cms, où il sont généralement utilisés pour gérer des flux RSS.</p>\n<p>Si possible, préférer un balisage « plat », sans hiérarchiser les données.</p>\n<p><img src=\"../../assets/img/balises-xml-dans-la-maquette.jpg\" alt=\"préparer la base de données\"></p>\n<h2 id=\"adapter-le-format-dexportation\">Adapter le format d’exportation</h2>\n<p>Le fichier XML est destiné à être importé dans inDesign. La plupart du temps, le fichier produit n’est pas exploitable directement par la maquette : l'importation doit suivre l'ordre de présentation des informations. Par exemple, si, sur la maquette, le nom d’un produit est suivi de son prix, alors ce doit être aussi le cas dans le XML.</p>\n<p>Pour cela, les transformations à appliquer sont décrites par un script rédigé en XSL. Ce script sera appliqué au moment de l’importation dans Indesign ; une préférence est prévue à cet effet.</p>\n<p><strong>Voyons un exemple, avec un redressement :</strong> dans la base, le champ « points forts »  contient une liste ; la convention de rédaction consiste à placer un tiret en début de ligne pour chaque point. La transformation va retirer ce tiret pour placer la ligne dans une balise <code>&#x3C;Points_forts></code> , et le groupe est ensuite encadré par une balise <code>&#x3C;Les_Points_forts></code>.</p>\n<p>le XML d'origine, issu de la base :</p>\n<pre><code class=\"hljs language-xml\">[ ... ]\n<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">pts_forts</span>></span>\n- La navigation sur un bateau tout confort sur le Nil et les balades sur les rives.\n- Les sites pharaoniques incontournables d'Assouan à Louxor.\n- Les scènes de vie quotidienne dans les champs.\n<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">pts_forts</span>></span>\n[ ... ]</code></pre>\n<p>le xsl contient les règles de transformation :</p>\n<pre><code class=\"hljs language-xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">xsl:variable</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"MarqueDeParagraphe\"</span>></span>\n\t<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">xsl:text</span>></span>&#x26;#xa;<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">xsl:text</span>></span>\n<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">xsl:variable</span>></span>\n\n[ ... ]\n<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Les_Points_forts</span>></span>\n\t<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">xsl:for-each</span> <span class=\"hljs-attr\">select</span>=<span class=\"hljs-string\">\"//Points_forts\"</span>></span>\n\t\t<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Points_forts</span>></span>\n\n<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">!—-</span> <span class=\"hljs-attr\">retirer</span> <span class=\"hljs-attr\">le</span> <span class=\"hljs-attr\">tiret</span> <span class=\"hljs-attr\">en</span> <span class=\"hljs-attr\">d</span>é<span class=\"hljs-attr\">but</span> <span class=\"hljs-attr\">de</span> <span class=\"hljs-attr\">ligne</span> <span class=\"hljs-attr\">-</span>—></span>\n\t\t<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">xsl:value-of</span> <span class=\"hljs-attr\">select</span>=<span class=\"hljs-string\">\"substring-after (normalize-space(.), '- ')\"</span>/></span>\n\n<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">!—-</span> <span class=\"hljs-attr\">retirer</span> <span class=\"hljs-attr\">les</span> <span class=\"hljs-attr\">espaces</span> <span class=\"hljs-attr\">en</span> <span class=\"hljs-attr\">exc</span>è<span class=\"hljs-attr\">s</span> <span class=\"hljs-attr\">-</span>—></span>\n\t\t<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">xsl:value-of</span> <span class=\"hljs-attr\">select</span>=<span class=\"hljs-string\">\"normalize-space(.)\"</span>/></span>\n\n<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">!—-</span> <span class=\"hljs-attr\">ajouter</span> <span class=\"hljs-attr\">une</span> <span class=\"hljs-attr\">marque</span> <span class=\"hljs-attr\">de</span> <span class=\"hljs-attr\">paragraphe</span> <span class=\"hljs-attr\">en</span> <span class=\"hljs-attr\">fin</span> <span class=\"hljs-attr\">de</span> <span class=\"hljs-attr\">ligne</span>, <span class=\"hljs-attr\">-</span>—></span>\n<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">!—-</span> <span class=\"hljs-attr\">sauf</span> <span class=\"hljs-attr\">sur</span> <span class=\"hljs-attr\">le</span> <span class=\"hljs-attr\">dernier</span> <span class=\"hljs-attr\">-</span>—></span>\n\t\t<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">xsl:if</span> <span class=\"hljs-attr\">test</span> =<span class=\"hljs-string\">\"position() != last()\"</span>></span>\n\t\t\t<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">xsl:value-of</span> <span class=\"hljs-attr\">select</span>=<span class=\"hljs-string\">\"$MarqueDeParagraphe\"</span>/></span>\n\t\t<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">xsl:if</span>></span>\n\n\t\t<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">Points_forts</span>></span>\n\t<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">xsl:for-each</span>></span>\n<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">Les_Points_forts</span>></span>\n[ ... ]</code></pre>\n<p>le  XML  transformé :</p>\n<pre><code class=\"hljs language-xml\">[ ... ]\n<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Les_Points_forts</span>></span>\n\t<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Points_forts</span>></span> La navigation sur un bateau tout confort sur le Nil et les balades sur les rives.<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">Points_forts</span>></span>\n\t<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Points_forts</span>></span> Les sites pharaoniques incontournables d'Assouan à Louxor.<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">Points_forts</span>></span>\n\t<span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Points_forts</span>></span>Les scènes de vie quotidienne dans les champs.<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">Points_forts</span>></span>\n<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">Les_Points_forts</span>></span>\n[ ... ]</code></pre>\n<p>Le résultat, importé dans la maquette :</p>\n<p><img src=\"../../assets/img/points-forts-maquette.jpg\" alt=\"xml importé dans la maquette\"></p>\n<p>Le passage par une transformation XSL apporte une grande souplesse dans la mise au point de la maquette ; il n’est pas rare qu’une demande de dernière minute nécessite, par exemple, des modifications dans l’ordre des informations ; la source des données n’est pas touchée et la modification réalisée par le studio, rapide.</p>\n<p>Il est possible, en gardant la même source, de créer des variantes de présentation, il suffit pour cela de créer un autre fichier XSL avec d'autres règles de transformation. On pourra aussi obtenir une fiche détaillée, une liste résumée, un index…</p>\n<aside class=\"post-aparte\">\n<p>XSL<a href=\"#note05\">5-6</a> est un langage assez peu connu et d'une logique assez complexe ; toutefois, les transformations à créer pour ce type d’usage sont triviales : il s’agit la plupart du temps de modifier le nom d’une balise, d’en changer l’ordre ou leur imbrication.</p>\n</aside>\n<h2 id=\"les-images\">Les images</h2>\n<p>Le meme principe : <em>write once…</em> s’applique aussi aux images. Si l’on part d’une base de données produit, il est probable que lui soit associée une base d’images. Il faut utiliser les fichiers sources, et éviter les versions optimisées pour l’affichage du site.</p>\n<p>Pour être utilisables pour le web, elle sont en mode RVB. Il est tout à fait possible de garder les images dans ce format pour les exploiter dans inDesign dans un flux d’impression. Simplement, la conversion en CMJN n’aura lieu qu’au moment de la production des PDF destinés à l’imprimeur<a href=\"#note07\">7</a>.</p>\n<p>Le spectre des couleurs reproductible en impression étant sensiblement plus limité, il faut être vigilant en réglant l’aperçu des images simulant à l’écran l’impression papier, pour éviter les verts fluo flatteurs qui grisent à l’impression.</p>\n<p><img src=\"../../assets/img/DSC_0329.jpg\" alt=\"les images du rvb au cmjn\"></p>\n<h2 id=\"en-fin-de-compte-les-meilleures-pages-se-font-à-lusine\">En fin de compte, les meilleures pages se font à l'usine.</h2>\n<p>Tout ce qui est répétitif peut être automatisé<a href=\"#note06\">8</a>. Le temps de préparation important réserve plutôt son emploi pour de gros projets. Ce type d’importation permet non seulement le formatage et l’application de styles à la volée, mais aussi le placement dans les divers éléments de la maquette. L’importation de photos est géré, et grâce aux scripts de transformation, des filtrages conditionnels peuvent être envisagés.</p>\n<p>L’importation directe, sans manipulation par le maquettiste, réduit le cycle de corrections qui est un poste important en temps passé. Les corrections peuvent s’envisager en toute confiance en amont de la maquette, hors du temps de l’urgence, et donc de façon plus efficace.</p>\n<p>Plus la maquette est complexe, plus le résultat comportera des défauts de composition qu’il faut régler : le maquettiste reste dans ce dispositif une partie essentielle pour le sens de la composition, l’équilibrage des contenus, le choix et le cadrage des photos. Avec l’expérience, il vaut mieux d’ailleurs ne pas chercher à tout régler d’avance, mais de créer les règles suffisantes pour la majorité des cas.</p>\n<p>La touche finale revient de toute façon au maquettiste !</p>\n<h3 id=\"sur-le-portfolio--les-magazines\">Sur le portfolio : les magazines</h3>\n<p>exemples de  catalogues :\nclubaventure, femmes du monde, golf</p>\n<aside class=\"notes\">\n<h2>Notes</h2>\n<ul>\n<li id=\"note01\">\n<p><a href=\"http://www.lemonde.fr/m-styles/article/2015/05/08/le-catalogue-papier-allie-surprenant-de-la-vente-en-ligne_4629601_4497319.html\">Dépassé le papier ?</a> Ce n’est pas nécessairement l’avis de tous.</p>\n</li>\n<li id=\"note02\">\n<p><a href=\"http://automatisation.kerosine.fr/automatisation\">Importation automatique</a> de bases de données dans Indesign.</p>\n</li>\n<li>\n<p>Une solution <a href=\"http://www.nextpage.fr\">collaborative</a> via une web app</p>\n</li>\n<li>\n<p>Une autre <a href=\"http://fr.pageondemand.com\">solution</a></p>\n</li>\n<li id=\"note05\">\n<p>initiation à  <a href=\"https://www.guillaumevoisin.fr/developpement/tutoriel-apprendre-les-feuilles-de-style-xslt\">xslt</a>.</p>\n</li>\n<li>\n<p>Une autre <a href=\"http://fsajous.free.fr/xml/xslt/xslt.html\">dossier sur xslt</a> plus complet.</p>\n</li>\n<li id=\"note07\">\n<p>Travailler en <a href=\"http://https://www.video2brain.com/fr/tuto/travailler-avec-un-flux-rvb-pour-les-images-et-exporter-en-pdf\">flux RVB</a>.</p>\n</li>\n<li id=\"note08\">\n<p>Pour tout savoir sur l'import XML dans inDesign : <a href=\"https://helpx.adobe.com/fr/indesign/using/importing-xml.html\">lisez le manuel</a> !</p>\n</li>\n</ul>\n</aside>\n","__filename":"articles/un-catalogue-est-un-site-comme-un-autre.md","__url":"/articles/un-catalogue-est-un-site-comme-un-autre/","__resourceUrl":"/articles/un-catalogue-est-un-site-comme-un-autre/index.html","__dataUrl":"/articles/un-catalogue-est-un-site-comme-un-autre/index.html.cdf7e8a9f5c925b8ed3f149d708e6f7d.json"}